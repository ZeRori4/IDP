# -*- coding: utf-8 -*-
'''
<parameters>
	<title>onboarding 31</title>
	<version>1.0</version>
    <parameter>
        <type>channel</type>
        <id>channel_id</id>
        <name>Канал</name>
        <value></value>
    </parameter>
    <parameter>
        <type>string</type>
        <name>date_start</name>
        <id>date_start</id>
        <value></value>
    </parameter>
    <parameter>
        <type>string</type>
        <name>date_end</name>
        <id>date_end</id>
        <value></value>
    </parameter>
    <parameter>
        <type>string</type>
        <name>Путь сохранения файла</name>
        <id>full_path</id>
        <value></value>
    </parameter>
<resources>
        <resource>video_exporter.py</resource>
    </resources>
</parameters>
'''


resources = {
    "video_exporter.py": """
        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
        lo6P/g8LmzXj
    """,
}
t1utils.resources_check(script_path, resources)

import datetime
from video_exporter import VideoExporter


GLOBALS = globals()

channel_id = GLOBALS.get("channel_id", "")
full_path = GLOBALS.get("full_path", "")
date_start = GLOBALS.get("date_start", "16.04.2024 03:00")
date_end = GLOBALS.get("date_end", "16.04.2024 03:10")


def str_to_dt(str_time):
    date_format = "%d.%m.%Y %H:%M"
    return datetime.datetime.strptime(str_time, date_format)


ve = VideoExporter()

ve.export(
channel_id,
dt_start=str_to_dt(date_start),
dt_end=str_to_dt(date_end),
file_path=full_path
)
