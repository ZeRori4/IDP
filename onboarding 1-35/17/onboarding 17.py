# -*- coding: utf-8 -*-
# Напишите здесь описание скрипта
'''
<parameters>
	<title>onboarding 17</title>
	<version>1.0</version>
    <parameter>
        <type>string</type>
        <id>DISCORD_WEBHOOKS</id>
        <name>Discord webhooks</name>
        <value></value>
    </parameter>
    <parameter>
        <type>channel</type>
        <id>CHANNEL_ID</id>
        <name>Канал</name>
        <value></value>
    </parameter>
        <resources>
        <resource>discord_sender.py</resource>
        <resource>shot_saver.py</resource>
    </resources>
</parameters>
'''

resources = {
    "discord_sender.py": """
        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
    """,
    "shot_saver.py": """
        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
    """,
}
t1utils.resources_check(script_path, resources)

import time

import host
from __builtin__ import object
from shot_saver import ShotSaver
from discord_sender import DiscordSender

GLOBALS = globals()

DISCORD_WEBHOOKS = GLOBALS.get("DISCORD_WEBHOOKS", "")
CHANNEL_ID = GLOBALS.get("CHANNEL_ID", "")


shot_saver = ShotSaver()
img = shot_saver.save(CHANNEL_ID)


class DCSender(object):
    """Sends messages via a webhook to Discord."""

    def __init__(self, webhook_url):
        self.dc = DiscordSender(webhook_url)

    def execute(self, images_paths_list, *args, **kwargs):
        self.dc.send(images_paths_list)


if __name__ == host.stats().parent().guid:
    discord_sender = DCSender(DISCORD_WEBHOOKS)
    discord_sender.execute(images_paths_list=str(img[1]))